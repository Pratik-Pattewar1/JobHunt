<!DOCTYPE html>
<html>
<head>
    <title>Applied Jobs</title>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
        }

        header {
            background-color: rgb(235, 235, 248);
            padding: 10px 50px;
            box-shadow: 1px 1px 1px black;
            position: sticky;
            top: 0;
        }

        .navbar ul {
            list-style: none;
            display: flex;
            justify-content: flex-end;
            gap: 25px;
            margin: 0;
        }

        table {
            width: 80%;
            margin: 30px auto;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 12px;
            text-align: center;
        }

        th {
            background:#333;
            color:white;
        }

        .approved { color: green; font-weight: 600; }
        .rejected { color: red; font-weight: 600; }
        .pending { color: orange; font-weight: 600; }

    </style>
</head>

<body>



<header>
    <nav class="navbar">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/jobs">Job</a></li>
            <li><a href="/applied-jobs">Applied Job</a></li>
            <li><a href="/profile">Profile</a></li>

            <li>
                <button style="background:#9390dc;color:white;border-radius:4px;">
                    {{session.name}}
                </button>
            </li>

            <li class="logout-btn"><a href="/logout">Logout</a></li>
        </ul>
    </nav>
</header>


<h1 style="text-align:center;margin-top:20px;">
    Your Applied Jobs
</h1>


<table>
    <tr>
        <th>Job Title</th>
        <th>Role</th>
        <th>Skills</th>
        <th>Status</th>
    </tr>

    {% for job in applied_jobs %}
    <tr>
        <td>{{ job.job_title }}</td>
        <td>{{ job.job_role }}</td>
        <td>{{ job.skills }}</td>

        <td>
            {% if job.status == 'Approved' %}
                <span class="approved">Approved</span>

            {% elif job.status == 'Rejected' %}
                <span class="rejected">Rejected</span>

            {% else %}
                <span class="pending">Pending</span>

            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
<!-- GLOBAL TOAST -->
<div id="toast"
     style="position:fixed;
            bottom:25px;
            right:25px;
            padding:14px 18px;
            border-radius:10px;
            color:white;
            font-weight:600;
            display:none;
            box-shadow:0 4px 10px rgba(0,0,0,0.25);
            z-index:99999;">
</div>

<script>
  function showToast(msg, type){

    let toast = document.getElementById("toast");

    toast.innerHTML = msg;

    if(type === "success")
        toast.style.background = "#28a745";
    else if(type === "error")
        toast.style.background = "#dc3545";
    else
        toast.style.background = "#17a2b8";

    toast.style.display = "block";

    setTimeout(()=> toast.style.display="none", 2000);
  }
</script>
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% set category, msg = messages[-1] %}
    <script>
        showToast("{{ msg }}", "{{ category }}")
    </script>
  {% endif %}
{% endwith %}

</body>
</html>

